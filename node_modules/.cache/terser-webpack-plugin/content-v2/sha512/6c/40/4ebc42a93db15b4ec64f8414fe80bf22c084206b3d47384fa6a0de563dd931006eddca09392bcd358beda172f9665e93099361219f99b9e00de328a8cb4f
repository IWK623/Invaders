{"code":"!function(e){var t={};function s(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var a in e)s.d(i,a,function(t){return e[t]}.bind(null,a));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,\"a\",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p=\"/build/\",s(s.s=1)}([function(e,t){e.exports=require(\"phaser\")},function(e,t,s){\"use strict\";s.r(t);var i=s(0),a=0,n=2,o=4,l=6,r=0,h=1,c=2;class d extends i.Scene{constructor(e){super({key:\"LoaderScene\"})}preload(){this.load.spritesheet(\"graphic\",\"assets/spaceinvaders.png\",{frameWidth:52,frameHeight:36}),this.load.spritesheet(\"bomb\",\"assets/bomb.png\",{frameWidth:12,frameHeight:27}),this.load.image(\"bullet\",\"assets/bullet.png\"),this.load.audio(\"explosion\",\"assets/audio/explosion.wav\"),this.load.audio(\"shoot\",\"assets/audio/shoot.wav\")}create(){this.animFactory(),this.scene.start(\"GameScene\")}animFactory(){this.alienAnimFactory(a),this.alienAnimFactory(n),this.alienAnimFactory(o),this.anims.create({key:\"explosion\",frames:this.anims.generateFrameNumbers(\"graphic\",{start:7,end:7}),frameRate:1,repeat:1}),this.anims.create({key:\"rocket\",frames:this.anims.generateFrameNumbers(\"graphic\",{start:l,end:l}),frameRate:0,repeat:0}),this.anims.create({key:\"bomb\",frames:this.anims.generateFrameNumbers(\"bomb\",{start:0,end:1}),frameRate:6,repeat:-1})}alienAnimFactory(e){this.anims.create({key:\"alien\"+e,frames:this.anims.generateFrameNumbers(\"graphic\",{start:e,end:e+1}),frameRate:2.5,repeat:-1})}}class u extends i.Scene{constructor(e){super({key:\"BootScene\"})}preload(){console.log(\"(C)bit33.io\\nSpaceinvaders 0.0.4\")}create(){let e=this.game.canvas.height,t=this.game.canvas.width;this.loadingText=this.add.text(t/2,e/2,\"Loading...\"),this.loadingText.setOrigin(.5),this.scene.start(\"LoaderScene\")}}class m extends Phaser.Physics.Arcade.Sprite{constructor(e){super(e,0,0,\"bomb\"),this.play(\"bomb\")}throw(e,t){this.enableBody(!0,e,t,!0,!0),this.setCollideWorldBounds(!0),this.body.onWorldBounds=!0,this.setVelocityY(300)}deactivate(){this.disableBody(!0,!0)}}class p extends Phaser.Physics.Arcade.Sprite{constructor(e){super(e,0,0,\"bullet\")}shoot(e,t){this.scene.sound.play(\"shoot\"),this.setCollideWorldBounds(!0),this.body.onWorldBounds=!0,this.enableBody(!0,e,t,!0,!0),this.setVelocityY(-300)}deactivate(){this.disableBody(!0,!0)}}class y extends Phaser.Physics.Arcade.Sprite{constructor(e,t){super(e,0,0,\"graphic\",t),this.alienType=t}activate(e,t){this.play(\"alien\"+this.alienType),this.setCollideWorldBounds(!0),this.body.onWorldBounds=!0,this.enableBody(!0,e,t,!0,!0)}deactivate(){this.disableBody(!0,!0)}explode(){this.scene.sound.play(\"explosion\"),this.deactivate()}}class b extends y{constructor(e){super(e,a)}}class g extends y{constructor(e){super(e,n)}}class f extends y{constructor(e){super(e,o)}}function v(e){e.deactivate()}class x{constructor(e,t){this.scene=e,this.maxY=e.game.canvas.height,this.aliensStartVelocity=40,this.aliens1=e.physics.add.group({maxSize:26,classType:b,runChildUpdate:!0}),this.aliens2=e.physics.add.group({maxSize:26,classType:g,runChildUpdate:!0}),this.aliens3=e.physics.add.group({maxSize:13,classType:f,runChildUpdate:!0}),this.init(t)}addColider(e,t,s){s.physics.add.collider(this.aliens1,e,t,null,s),s.physics.add.collider(this.aliens2,e,t,null,s),s.physics.add.collider(this.aliens3,e,t,null,s)}restart(e){this.level=e,this.forAllAliens(v),this.init(e)}init(e){this.level=e,this.makeAlienRow(0,this.aliens1),this.makeAlienRow(1,this.aliens1),this.makeAlienRow(2,this.aliens2),this.makeAlienRow(3,this.aliens2),this.makeAlienRow(4,this.aliens3),this.aliensVelocity=this.aliensStartVelocity+5*(e-1),this.aliens1.setVelocityX(this.aliensVelocity),this.aliens2.setVelocityX(this.aliensVelocity),this.aliens3.setVelocityX(this.aliensVelocity),this.alienThrowsBombInFuture()}makeAlienRow(e,t){for(var s=0;s<=12;s++){let i=100+54*s,a=70+50*e;t.get().activate(i,a)}}countAliensDetailed(){const e=this.aliens1.countActive(),t=this.aliens2.countActive();return{all:e+t+this.aliens3.countActive(),aliens1:e,aliens2:t,aliens3:e}}testAllAliensDead(){return 0===this.countAliensDetailed().all}getRandomAlien(){const e=this.countAliensDetailed();if(e.all>0){let t=Math.floor(Math.random()*e.all),s=this.aliens1;t>=e.aliens1&&(s=this.aliens2,t-=e.aliens1),t>=e.aliens2&&(s=this.aliens3,t-=e.aliens2);return s.getFirstNth(t,!0,!1)}}alienThrowsBombInFuture(){let e=400+4e3*Math.random();this.scene.time.addEvent({delay:e,callback:this.alienThrowsBomb,callbackScope:this})}alienThrowsBomb(){if(this.scene.state==h){const e=this.getRandomAlien();null!=e&&this.scene.bombs.get().throw(e.x,e.y+10)}this.alienThrowsBombInFuture()}onWorldbounds(e){let t=!1;if(e.gameObject.active){if(this.aliens1.contains(e.gameObject)||this.aliens2.contains(e.gameObject)||this.aliens3.contains(e.gameObject)){this.aliensVelocity=1.02*-this.aliensVelocity,this.aliens1.setVelocityX(this.aliensVelocity),this.aliens2.setVelocityX(this.aliensVelocity),this.aliens3.setVelocityX(this.aliensVelocity);const e=function(e){return e.y+5>this.maxY}.bind(this);t=this.aliens1.getChildren().find(e)||this.aliens2.getChildren().find(e)||this.aliens3.getChildren().find(e),t||this.forAllAliens((function(e){e.y+=5}))}}return t}forAllAliens(e){this.aliens1.getChildren().forEach(e),this.aliens2.getChildren().forEach(e),this.aliens3.getChildren().forEach(e)}gameover(){this.aliens1.setVelocityX(0),this.aliens1.setVelocityY(0),this.aliens2.setVelocityX(0),this.aliens2.setVelocityY(0),this.aliens3.setVelocityX(0),this.aliens3.setVelocityY(0)}}function w(e){return e.toLocaleString(\"en\",{minimumIntegerDigits:4,minimumFractionDigits:0,useGrouping:!1})}class S{constructor(e){const t={fontSize:\"16px\",fontFamily:\"Pixel\",fill:\"#ffffff\"};e.add.text(16,16,\"SCORE   HI-SCORE\",t),this.scoreText=e.add.text(22,32,\"\",t),this.hiScore=0,this.score=0}setHiScore(){this.score>this.hiScore&&(this.hiScore=this.score),this.score=0,this.print()}point(){this.score++,this.print()}print(){this.scoreText.setText(w(this.score)+\"     \"+w(this.hiScore))}}var k=new class{create(e){let t=e.physics.add.sprite(300,500,\"graphic\",l).setImmovable(!0);return t.setCollideWorldBounds(!0),t.body.onWorldBounds=!0,t.body.world.on(\"worldbounds\",(function(e){e.gameObject===this&&this.setActive(!1)}),t),t}};class V extends i.Scene{constructor(e){super({key:\"GameScene\"})}create(){this.createText(),this.level=1,this.sound.add(\"explosion\"),this.sound.add(\"shoot\"),this.cursors=this.input.keyboard.createCursorKeys(),this.rocket=k.create(this),this.bullets=this.physics.add.group({maxSize:20,classType:p,runChildUpdate:!0}),this.bombs=this.physics.add.group({maxSize:20,classType:m,runChildUpdate:!0}),this.alienManager=new x(this,this.level),this.physics.world.on(\"worldbounds\",this.onWorldbounds,this),this.alienManager.addColider(this.bullets,this.alienHitEvent,this),this.alienManager.addColider(this.rocket,this.alienOnRocketEvent,this),this.physics.add.collider(this.rocket,this.bombs,this.bombHitEvent,null,this),this.input.keyboard.on(\"keydown\",this.handleKey,this),this.scoreManager=new S(this),this.scoreManager.print(),this.state=h}createText(){const e=this.game.canvas.height,t=this.game.canvas.width,s={fontSize:\"44px\",fontFamily:\"Pixel\",fill:\"#ffffff\"};this.gameoverText=this.add.text(t/2,e/2-100,\"GAME OVER\",s).setVisible(!1).setDepth(1),this.gameoverText.setOrigin(.5),this.beginText=this.add.text(t/2,e/2-60,\"PRESS ANY KEY FOR NEW GAME\",s).setVisible(!1).setDepth(1),this.beginText.setOrigin(.5)}onWorldbounds(e){this.bullets.contains(e.gameObject)&&e.gameObject.deactivate();this.bombs.contains(e.gameObject)&&e.gameObject.deactivate(),this.state==h&&this.alienManager.onWorldbounds(e)&&this.gameover()}update(){this.handleCursor()}handleCursor(){this.state==h?this.cursors.left.isDown?this.rocket.setVelocityX(-160):this.cursors.right.isDown?this.rocket.setVelocityX(160):this.rocket.setVelocityX(0):this.rocket.setVelocityX(0)}handleKey(e){switch(this.state){case h:\"Space\"==e.code&&this.fireBullet();break;case r:this.restartGame()}}fireBullet(){const e=this.bullets.get();e&&e.shoot(this.rocket.x-1,this.rocket.y-18)}alienHitEvent(e,t){this.state==h&&e.active&&t.active&&(t.deactivate(),e.explode(),this.scoreManager.point(),this.alienManager.testAllAliensDead()&&this.levelUp())}alienOnRocketEvent(e,t){this.state==h&&e.active&&this.gameover()}bombHitEvent(e,t){this.state==h&&t.active&&this.gameover()}levelUp(){this.level++,this.time.addEvent({delay:2e3,callback:this.restart(),callbackScope:this})}restart(){this.alienManager.restart(this.level)}gameover(){this.state=c,this.sound.play(\"explosion\"),this.rocket.play(\"explosion\"),this.time.removeAllEvents(),this.alienManager.gameover(),this.bullets.getChildren().forEach((function(e){e.deactivate()})),this.bombs.setVelocityX(0),this.bombs.setVelocityY(0),this.gameoverText.setVisible(!0),this.aliensStartVelocity=40,this.time.addEvent({delay:3e3,callback:function(){this.ready()},callbackScope:this})}ready(){this.state=r,this.beginText.setVisible(!0)}restartGame(){this.state=h,this.level=1,this.scoreManager.setHiScore(),this.rocket.play(\"rocket\"),this.beginText.setVisible(!1),this.gameoverText.setVisible(!1),this.bombs.getChildren().forEach((function(e){e.deactivate()})),this.restart()}}var A,T={type:Phaser.AUTO,parent:\"phaser-example\",width:800,height:600,backgroundColor:\"#dbcf8b\",physics:{default:\"arcade\",arcade:{gravity:{y:0}}},scene:[u,d,V]};function C(){var e=document.querySelector(\"canvas\"),t=window.innerWidth,s=window.innerHeight,i=t/s,a=A.config.width/A.config.height;i<a?(e.style.width=t+\"px\",e.style.height=t/a+\"px\"):(e.style.width=s*a+\"px\",e.style.height=s+\"px\")}window.onload=function(){A=new Phaser.Game(T),window.focus(),C(),window.addEventListener(\"resize\",C)}}]);","extractedComments":[]}